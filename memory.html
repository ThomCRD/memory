<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous" />
    <style>
        .carte {
            border: 1px;
            border-color: black;
            border-style: solid;
        }

        .display-flex {
            display: flex;
            flex-direction: row;
            justify-content: center;
        }
    </style>
    <script src="memory.js" type="module"></script>
</head>

<body>
    <main>
        <div class="display-flex">
            <div class="container container-fluid">
                <div class="row">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_0-col_0"
                        class="carte col-md-2 offset-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_0-col_1"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_0-col_2"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_0-col_3"
                        class="carte col-md-2 img-fluid">
                </div>

                <div class="row">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_1-col_0"
                        class="carte col-md-2 offset-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_1-col_1"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_1-col_2"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_1-col_3"
                        class="carte col-md-2 img-fluid">
                </div>

                <div class="row">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_2-col_0"
                        class="carte col-md-2 offset-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_2-col_1"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_2-col_2"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_2-col_3"
                        class="carte col-md-2 img-fluid">
                </div>

                <div class="row">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_3-col_0"
                        class="carte col-md-2 offset-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_3-col_1"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_3-col_2"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_3-col_3"
                        class="carte col-md-2 img-fluid">
                </div>

                <div class="row">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_4-col_0"
                        class="carte col-md-2 offset-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_4-col_1"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_4-col_2"
                        class="carte col-md-2 img-fluid">
                    <img src="images/dos.jpeg" image="" type="" alt="cachée" id="row_4-col_3"
                        class="carte col-md-2 img-fluid">
                </div>

                <div>
                    </br />
                    <button class="boutons" id="cheatcode" style="display: none;">cheatcode</button>
                </div>

            </div>
        </div>
    </main>

    <script>
        var cartesRecto=[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9];
        var nbPaire=0;
        var cartesSelect=0;
        var carte1=[];
        var carte2=[];
        var carteTemp1=0;
        var carteTemp2=0;
        var tabCartes=document.getElementsByTagName("img");//.getElementsByClassName("row")

        for(var i=0;i<tabCartes.length;i++){
            tabCartes[i].nbCarte=i;
            tabCartes[i].onclick=function(){
                init();
                play(this.nbCarte);
                test();
                reset();
                win();
            }                      
        }

        function init(){
            for(var zone=cartesRecto.length-1; zone>=1; zone--){
                var aleat=Math.floor(Math.random()*(zone+1));
                var back=cartesRecto[zone];
                cartesRecto[zone]=cartesRecto[aleat];
                cartesRecto[aleat]=back;
            }
        }

        function play(nbCarte){
            tabCartes[nbCarte].src="images/image"+cartesRecto[nbCarte]+".jpeg";
            cartesSelect=cartesSelect+1;
            if (cartesSelect==1){
                carte1="images/image"+cartesRecto[nbCarte]+".jpeg";
                carteTemp1=nbCarte;

            }
            if (cartesSelect==2){
                carte2="images/image"+cartesRecto[nbCarte]+".jpeg";
                carteTemp2=nbCarte;
            }
        }

        function test(){
            if(cartesSelect==2){
                if (carte1==carte2){
                    nbPaire=nbPaire+1;
                    //console.log("congratulation");
                }
                else{
                    setTimeout(()=>{ tabCartes[carteTemp1].src="images/dos.jpeg"},1000);
                    setTimeout(()=>{ tabCartes[carteTemp2].src="images/dos.jpeg"},1000);
                }
            }
        }

        function reset(){
            if (cartesSelect==2){
                cartesSelect=0;
                console.log("number of pair : " + nbPaire);
            }
        }

        function win(){
            if (nbPaire==10){
                console.log("You WIN");
            }
        }
    </script>
</body>

</html>